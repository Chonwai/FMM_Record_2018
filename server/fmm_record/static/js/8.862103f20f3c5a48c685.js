webpackJsonp([8],{CHKu:function(e,t){},ooMB:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("mvHQ"),s=a.n(i),n=a("DEN3"),r=a.n(n),o={data:function(){return{newRecordApi:r.a.URL+r.a.newRecordApi,getLastRecordNumberApi:r.a.URL+r.a.getLastRecordNumberApi,searchUserByContactApi:r.a.URL+r.a.searchUserByContactApi,searchUserByStaffNumberApi:r.a.URL+r.a.searchUserByStaffNumberApi,recordNumber:0,name:null,date:null,staffNumber:null,department:null,dateOfReturn:null,contact:null,itemAmount:0,assetsModel:[],assetsNo:[],useLoctaion:[],returnName:[],returnDate:[],remark:null,deliveryPerson:null,deliveryDate:null,receiver:null,receivedDate:null,isReturn:!1,in_ex:null,inputDataFlag:0,getUserData:null}},methods:{addOne:function(){this.itemAmount+=1,this.itemAmount>10&&(this.itemAmount=10,swal("最多只能填寫十項！",{icon:"error"}))},dropOne:function(){this.itemAmount-=1,this.itemAmount<=0&&(this.itemAmount=0)},findLastRecordNumber:function(){var e=this;this.$http.get(this.getLastRecordNumberApi).then(function(t){e.recordNumber=t.data.recordNumber})},searchByPhone:function(){var e=this;""!=this.contact?this.$http.post(this.searchUserByContactApi,s()({userContact:this.contact})).then(function(t){0==t.data.message?swal(":( 找不到用戶資料，請稍後新增用戶！",{icon:"error"}):(swal("成功填入用戶信息！",{icon:"success"}),e.getUserData=t.data,e.department=e.getUserData[0].department,e.staffNumber=e.getUserData[0].staffNumber,e.name=e.getUserData[0].userName)}):swal("請填寫電話才能搜尋！",{icon:"error"})},searchByStaffNumber:function(){var e=this;console.log(this.staffNumber),""!=this.staffNumber?this.$http.post(this.searchUserByStaffNumberApi,s()({staffNumber:this.staffNumber})).then(function(t){0==t.data.message?swal(":( 找不到用戶資料，請稍後新增用戶！",{icon:"error"}):(swal("成功填入用戶信息！",{icon:"success"}),e.getUserData=t.data,e.department=e.getUserData[0].department,e.staffNumber=e.getUserData[0].staffNumber,e.name=e.getUserData[0].userName,e.contact=e.getUserData[0].userContact)}):swal("請填寫職員/學生證號碼才能搜尋！",{icon:"error"})},submit:function(){var e=this;this.checkInputData(),1==this.inputDataFlag&&this.$http.post(this.newRecordApi,s()({name:this.name,date:this.date,staffNumber:this.staffNumber,department:this.department,dateOfReturn:this.dateOfReturn,contact:this.contact,itemAmount:this.itemAmount,assetsModel:this.assetsModel,assetsNo:this.assetsNo,useLoctaion:this.useLoctaion,returnName:this.returnName,returnDate:this.returnDate,remark:this.remark,deliveryPerson:this.deliveryPerson,deliveryDate:this.deliveryDate,receiver:this.receiver,receivedDate:this.receivedDate,isReturn:this.isReturn,in_ex:this.in_ex})).then(function(t){1==t.data.message?swal("新增成功！新表單編號為"+t.data.newFormID.FormID,{icon:"success"}):0==t.data.message&&swal("新增失敗，請填寫完整資料再試一次",{icon:"error"}),console.log(t.data),e.inputDataFlag=0,e.resetInput()})},checkInputData:function(){""==this.name?swal("領取人名稱未填入",{icon:"error"}):""==this.contact?swal("聯絡電話未填入",{icon:"error"}):""==this.assetsModel||""==this.assetsNo?swal("借件資料未填入",{icon:"error"}):""==this.deliveryPerson?swal("交件人名稱未填入",{icon:"error"}):this.inputDataFlag=1},resetInput:function(){this.recordNumber=0,this.name=null,this.date=null,this.staffNumber=null,this.department=null,this.dateOfReturn=null,this.contact=null,this.itemAmount=0,this.assetsModel=[],this.assetsNo=[],this.useLoctaion=[],this.returnName=[],this.returnDate=[],this.remark=null,this.deliveryPerson=null,this.deliveryDate=null,this.receiver=null,this.receivedDate=null,this.isReturn=!1,this.in_ex=null,this.inputDataFlag=0}},created:function(){this.itemAmount=0,this.findLastRecordNumber(),swal("提提您~","記得填寫「電話」及「職員/學生證號碼」等資料。","info")}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"new-record-container"},[e._m(0),e._v(" "),a("div",{staticClass:"new-record-form-container"},[a("div",{staticClass:"form-input input-item-title"},[a("label",[e._v("借出範圍：")]),e._v(" "),a("div",{staticClass:"input-embed-input-container"},[a("label",[e._v("內部：")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.in_ex,expression:"in_ex"}],staticClass:"input-embed-input",attrs:{type:"radio",value:"internal"},domProps:{checked:e._q(e.in_ex,"internal")},on:{change:function(t){e.in_ex="internal"}}}),e._v(" "),a("label",[e._v("外部：")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.in_ex,expression:"in_ex"}],staticClass:"input-embed-input",attrs:{type:"radio",value:"external"},domProps:{checked:e._q(e.in_ex,"external")},on:{change:function(t){e.in_ex="external"}}})])]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],staticClass:"form-input",attrs:{placeholder:"領取人："},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}}),e._v(" "),a("div",{staticClass:"form-input input-item-title"},[a("label",[e._v("日期：")]),e._v(" "),a("div",{staticClass:"input-embed-input-container"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.date,expression:"date"}],staticClass:"input-embed-input",attrs:{type:"date"},domProps:{value:e.date},on:{input:function(t){t.target.composing||(e.date=t.target.value)}}})])]),e._v(" "),a("div",{staticClass:"form-input input-item-title"},[a("label",[e._v("職員/學生證號碼：")]),e._v(" "),a("div",{staticClass:"input-embed-input-container"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.staffNumber,expression:"staffNumber"}],staticClass:"input-embed-input",attrs:{placeholder:"(Example: XXXX-X)"},domProps:{value:e.staffNumber},on:{input:function(t){t.target.composing||(e.staffNumber=t.target.value)}}}),e._v(" "),a("button",{staticClass:"input-embed-input submit-btn",on:{click:function(t){e.searchByStaffNumber()}}},[e._v("根據ID搜尋用戶資料")])])]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.department,expression:"department"}],staticClass:"form-input",attrs:{placeholder:"部門："},domProps:{value:e.department},on:{input:function(t){t.target.composing||(e.department=t.target.value)}}}),e._v(" "),a("div",{staticClass:"form-input input-item-title"},[a("label",[e._v("預期歸還：")]),e._v(" "),a("div",{staticClass:"input-embed-input-container"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.dateOfReturn,expression:"dateOfReturn"}],staticClass:"input-embed-input",attrs:{type:"date"},domProps:{value:e.dateOfReturn},on:{input:function(t){t.target.composing||(e.dateOfReturn=t.target.value)}}})])]),e._v(" "),a("div",{staticClass:"form-input input-item-title"},[a("label",[e._v("電話：")]),e._v(" "),a("div",{staticClass:"input-embed-input-container"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.contact,expression:"contact"}],staticClass:"input-embed-input",attrs:{placeholder:"(Example: XXXX)"},domProps:{value:e.contact},on:{input:function(t){t.target.composing||(e.contact=t.target.value)}}}),e._v(" "),a("button",{staticClass:"input-embed-input submit-btn",on:{click:function(t){e.searchByPhone()}}},[e._v("根據電話搜尋用戶資料")])])]),e._v(" "),a("div",{staticClass:"form-input input-item-title"},[a("label",[e._v("項目數量：")]),e._v(" "),a("div",{staticClass:"item-amount"},[a("button",{staticClass:"form-item-button",on:{click:function(t){e.dropOne()}}},[e._v("-")]),e._v(" "),a("span",{staticClass:"show-amount"},[e._v(e._s(e.itemAmount))]),e._v(" "),a("button",{staticClass:"form-item-button",on:{click:function(t){e.addOne()}}},[e._v("+")])])]),e._v(" "),e._l(e.itemAmount,function(t){return a("div",{key:t.key,staticClass:"form-input item-form"},[a("label",{staticClass:"item-title"},[e._v("項目："+e._s(t))]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.assetsModel[t-1],expression:"assetsModel[item - 1]"}],staticClass:"form-input",attrs:{placeholder:"器材名稱及型號："},domProps:{value:e.assetsModel[t-1]},on:{input:function(a){a.target.composing||e.$set(e.assetsModel,t-1,a.target.value)}}}),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.assetsNo[t-1],expression:"assetsNo[item - 1]"}],staticClass:"form-input",attrs:{placeholder:"器材財產編號："},domProps:{value:e.assetsNo[t-1]},on:{input:function(a){a.target.composing||e.$set(e.assetsNo,t-1,a.target.value)}}}),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.useLoctaion[t-1],expression:"useLoctaion[item - 1]"}],staticClass:"form-input",attrs:{placeholder:"用途及使用地點："},domProps:{value:e.useLoctaion[t-1]},on:{input:function(a){a.target.composing||e.$set(e.useLoctaion,t-1,a.target.value)}}}),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.returnName[t-1],expression:"returnName[item - 1]"}],staticClass:"form-input",attrs:{placeholder:"還件人："},domProps:{value:e.returnName[t-1]},on:{input:function(a){a.target.composing||e.$set(e.returnName,t-1,a.target.value)}}}),e._v(" "),a("div",{staticClass:"form-input input-item-title"},[a("label",[e._v("還件日期：")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.returnDate[t-1],expression:"returnDate[item - 1]"}],staticClass:"input-embed-input",attrs:{type:"date"},domProps:{value:e.returnDate[t-1]},on:{input:function(a){a.target.composing||e.$set(e.returnDate,t-1,a.target.value)}}})])])}),e._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.remark,expression:"remark"}],staticClass:"form-input",attrs:{placeholder:"備註："},domProps:{value:e.remark},on:{input:function(t){t.target.composing||(e.remark=t.target.value)}}}),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.deliveryPerson,expression:"deliveryPerson"}],staticClass:"form-input",attrs:{placeholder:"交件人："},domProps:{value:e.deliveryPerson},on:{input:function(t){t.target.composing||(e.deliveryPerson=t.target.value)}}}),e._v(" "),a("div",{staticClass:"form-input input-item-title"},[a("label",[e._v("交件日期：")]),e._v(" "),a("div",{staticClass:"input-embed-input-container"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.deliveryDate,expression:"deliveryDate"}],staticClass:"input-embed-input",attrs:{type:"date"},domProps:{value:e.deliveryDate},on:{input:function(t){t.target.composing||(e.deliveryDate=t.target.value)}}})])]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.receiver,expression:"receiver"}],staticClass:"form-input",attrs:{placeholder:"收件人："},domProps:{value:e.receiver},on:{input:function(t){t.target.composing||(e.receiver=t.target.value)}}}),e._v(" "),a("div",{staticClass:"form-input input-item-title"},[a("label",[e._v("收件日期：")]),e._v(" "),a("div",{staticClass:"input-embed-input-container"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.receivedDate,expression:"receivedDate"}],staticClass:"input-embed-input",attrs:{type:"date"},domProps:{value:e.receivedDate},on:{input:function(t){t.target.composing||(e.receivedDate=t.target.value)}}})])]),e._v(" "),a("div",{staticClass:"form-input input-item-title"},[a("label",[e._v("已還：")]),e._v(" "),a("div",{staticClass:"input-embed-input-container"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.isReturn,expression:"isReturn"}],staticClass:"input-embed-input",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.isReturn)?e._i(e.isReturn,null)>-1:e.isReturn},on:{change:function(t){var a=e.isReturn,i=t.target,s=!!i.checked;if(Array.isArray(a)){var n=e._i(a,null);i.checked?n<0&&(e.isReturn=a.concat([null])):n>-1&&(e.isReturn=a.slice(0,n).concat(a.slice(n+1)))}else e.isReturn=s}}})])]),e._v(" "),a("button",{staticClass:"form-input submit-btn",on:{click:function(t){e.submit()}}},[e._v("新增")])],2)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"title"},[t("h1",[this._v("新增表單")])])}]};var l=a("VU/8")(o,u,!1,function(e){a("CHKu")},"data-v-359c5bbb",null);t.default=l.exports}});
//# sourceMappingURL=8.862103f20f3c5a48c685.js.map