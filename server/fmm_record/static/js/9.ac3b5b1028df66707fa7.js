webpackJsonp([9],{"OC+Y":function(t,e){},ooMB:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("mvHQ"),s=a.n(i),n=a("DEN3"),r=a.n(n),o={data:function(){return{newRecordApi:r.a.URL+r.a.newRecordApi,getLastRecordNumberApi:r.a.URL+r.a.getLastRecordNumberApi,searchUserByContactApi:r.a.URL+r.a.searchUserByContactApi,searchUserByStaffNumberApi:r.a.URL+r.a.searchUserByStaffNumberApi,recordNumber:0,name:"",date:"",staffNumber:"",department:"",dateOfReturn:"",contact:"",itemAmount:0,assetsModel:[],assetsNo:[],useLoctaion:[],returnName:[],returnDate:[],remark:"",deliveryPerson:"",deliveryDate:"",receiver:"",receivedDate:"",isReturn:!1,in_ex:"",inputDataFlag:0,getUserData:""}},methods:{addOne:function(){this.itemAmount+=1,this.itemAmount>10&&(this.itemAmount=10,swal("最多只能填寫十項！",{icon:"error"}))},dropOne:function(){this.itemAmount-=1,this.itemAmount<=0&&(this.itemAmount=0)},findLastRecordNumber:function(){var t=this;this.$http.get(this.getLastRecordNumberApi).then(function(e){t.recordNumber=e.data.recordNumber})},searchByPhone:function(){var t=this;""!=this.contact?this.$http.post(this.searchUserByContactApi,s()({userContact:this.contact})).then(function(e){0==e.data.message?swal(":( 找不到用戶資料，請稍後新增用戶！",{icon:"error"}):(swal("成功填入用戶信息！",{icon:"success"}),t.getUserData=e.data,t.department=t.getUserData[0].department,t.staffNumber=t.getUserData[0].staffNumber,t.name=t.getUserData[0].userName)}):swal("請填寫電話才能搜尋！",{icon:"error"})},searchByStaffNumber:function(){var t=this;console.log(this.staffNumber),""!=this.staffNumber?this.$http.post(this.searchUserByStaffNumberApi,s()({staffNumber:this.staffNumber})).then(function(e){0==e.data.message?swal(":( 找不到用戶資料，請稍後新增用戶！",{icon:"error"}):(swal("成功填入用戶信息！",{icon:"success"}),t.getUserData=e.data,t.department=t.getUserData[0].department,t.staffNumber=t.getUserData[0].staffNumber,t.name=t.getUserData[0].userName,t.contact=t.getUserData[0].userContact)}):swal("請填寫職員/學生證號碼才能搜尋！",{icon:"error"})},submit:function(){var t=this;this.checkInputData(),1==this.inputDataFlag&&this.$http.post(this.newRecordApi,s()({name:this.name,date:this.date,staffNumber:this.staffNumber,department:this.department,dateOfReturn:this.dateOfReturn,contact:this.contact,itemAmount:this.itemAmount,assetsModel:this.assetsModel,assetsNo:this.assetsNo,useLoctaion:this.useLoctaion,returnName:this.returnName,returnDate:this.returnDate,remark:this.remark,deliveryPerson:this.deliveryPerson,deliveryDate:this.deliveryDate,receiver:this.receiver,receivedDate:this.receivedDate,isReturn:this.isReturn,in_ex:this.in_ex})).then(function(e){swal("新增成功！",{icon:"success"}),console.log(e.data),t.inputDataFlag=0,t.resetInput()})},checkInputData:function(){""==this.name?swal("領取人名稱未填入",{icon:"error"}):""==this.contact?swal("聯絡電話未填入",{icon:"error"}):""==this.assetsModel||""==this.assetsNo?swal("借件資料未填入",{icon:"error"}):""==this.deliveryPerson?swal("交件人名稱未填入",{icon:"error"}):this.inputDataFlag=1},resetInput:function(){this.recordNumber=0,this.name="",this.date="",this.staffNumber="",this.department="",this.dateOfReturn="",this.contact="",this.itemAmount=0,this.assetsModel=[],this.assetsNo=[],this.useLoctaion=[],this.returnName=[],this.returnDate=[],this.remark="",this.deliveryPerson="",this.deliveryDate="",this.receiver="",this.receivedDate="",this.isReturn=!1,this.in_ex="",this.inputDataFlag=0}},created:function(){this.itemAmount=0,this.findLastRecordNumber(),swal("提提您~","記得填寫「電話」及「職員/學生證號碼」等資料。","info")}},u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"new-record-container"},[t._m(0),t._v(" "),a("div",{staticClass:"new-record-form-container"},[a("div",{staticClass:"form-input input-item-title"},[a("label",[t._v("借出範圍：")]),t._v(" "),a("div",{staticClass:"input-embed-input-container"},[a("label",[t._v("內部：")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.in_ex,expression:"in_ex"}],staticClass:"input-embed-input",attrs:{type:"radio",value:"internal"},domProps:{checked:t._q(t.in_ex,"internal")},on:{change:function(e){t.in_ex="internal"}}}),t._v(" "),a("label",[t._v("外部：")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.in_ex,expression:"in_ex"}],staticClass:"input-embed-input",attrs:{type:"radio",value:"external"},domProps:{checked:t._q(t.in_ex,"external")},on:{change:function(e){t.in_ex="external"}}})])]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"form-input",attrs:{placeholder:"領取人："},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}}),t._v(" "),a("div",{staticClass:"form-input input-item-title"},[a("label",[t._v("日期：")]),t._v(" "),a("div",{staticClass:"input-embed-input-container"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.date,expression:"date"}],staticClass:"input-embed-input",attrs:{type:"date"},domProps:{value:t.date},on:{input:function(e){e.target.composing||(t.date=e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"form-input input-item-title"},[a("label",[t._v("職員/學生證號碼：")]),t._v(" "),a("div",{staticClass:"input-embed-input-container"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.staffNumber,expression:"staffNumber"}],staticClass:"input-embed-input",attrs:{placeholder:"(Example: XXXX-X)"},domProps:{value:t.staffNumber},on:{input:function(e){e.target.composing||(t.staffNumber=e.target.value)}}}),t._v(" "),a("button",{staticClass:"input-embed-input submit-btn",on:{click:function(e){t.searchByStaffNumber()}}},[t._v("根據ID搜尋用戶資料")])])]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.department,expression:"department"}],staticClass:"form-input",attrs:{placeholder:"部門："},domProps:{value:t.department},on:{input:function(e){e.target.composing||(t.department=e.target.value)}}}),t._v(" "),a("div",{staticClass:"form-input input-item-title"},[a("label",[t._v("預期歸還：")]),t._v(" "),a("div",{staticClass:"input-embed-input-container"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.dateOfReturn,expression:"dateOfReturn"}],staticClass:"input-embed-input",attrs:{type:"date"},domProps:{value:t.dateOfReturn},on:{input:function(e){e.target.composing||(t.dateOfReturn=e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"form-input input-item-title"},[a("label",[t._v("電話：")]),t._v(" "),a("div",{staticClass:"input-embed-input-container"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.contact,expression:"contact"}],staticClass:"input-embed-input",attrs:{placeholder:"(Example: XXXX)"},domProps:{value:t.contact},on:{input:function(e){e.target.composing||(t.contact=e.target.value)}}}),t._v(" "),a("button",{staticClass:"input-embed-input submit-btn",on:{click:function(e){t.searchByPhone()}}},[t._v("根據電話搜尋用戶資料")])])]),t._v(" "),a("div",{staticClass:"form-input input-item-title"},[a("label",[t._v("項目數量：")]),t._v(" "),a("div",{staticClass:"item-amount"},[a("button",{staticClass:"form-item-button",on:{click:function(e){t.dropOne()}}},[t._v("-")]),t._v(" "),a("span",{staticClass:"show-amount"},[t._v(t._s(t.itemAmount))]),t._v(" "),a("button",{staticClass:"form-item-button",on:{click:function(e){t.addOne()}}},[t._v("+")])])]),t._v(" "),t._l(t.itemAmount,function(e){return a("div",{key:e.key,staticClass:"form-input item-form"},[a("label",{staticClass:"item-title"},[t._v("項目："+t._s(e))]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.assetsModel[e-1],expression:"assetsModel[item - 1]"}],staticClass:"form-input",attrs:{placeholder:"器材名稱及型號："},domProps:{value:t.assetsModel[e-1]},on:{input:function(a){a.target.composing||t.$set(t.assetsModel,e-1,a.target.value)}}}),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.assetsNo[e-1],expression:"assetsNo[item - 1]"}],staticClass:"form-input",attrs:{placeholder:"器材財產編號："},domProps:{value:t.assetsNo[e-1]},on:{input:function(a){a.target.composing||t.$set(t.assetsNo,e-1,a.target.value)}}}),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.useLoctaion[e-1],expression:"useLoctaion[item - 1]"}],staticClass:"form-input",attrs:{placeholder:"用途及使用地點："},domProps:{value:t.useLoctaion[e-1]},on:{input:function(a){a.target.composing||t.$set(t.useLoctaion,e-1,a.target.value)}}}),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.returnName[e-1],expression:"returnName[item - 1]"}],staticClass:"form-input",attrs:{placeholder:"還件人："},domProps:{value:t.returnName[e-1]},on:{input:function(a){a.target.composing||t.$set(t.returnName,e-1,a.target.value)}}}),t._v(" "),a("div",{staticClass:"form-input input-item-title"},[a("label",[t._v("還件日期：")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.returnDate[e-1],expression:"returnDate[item - 1]"}],staticClass:"input-embed-input",attrs:{type:"date"},domProps:{value:t.returnDate[e-1]},on:{input:function(a){a.target.composing||t.$set(t.returnDate,e-1,a.target.value)}}})])])}),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.remark,expression:"remark"}],staticClass:"form-input",attrs:{placeholder:"備註："},domProps:{value:t.remark},on:{input:function(e){e.target.composing||(t.remark=e.target.value)}}}),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.deliveryPerson,expression:"deliveryPerson"}],staticClass:"form-input",attrs:{placeholder:"交件人："},domProps:{value:t.deliveryPerson},on:{input:function(e){e.target.composing||(t.deliveryPerson=e.target.value)}}}),t._v(" "),a("div",{staticClass:"form-input input-item-title"},[a("label",[t._v("交件日期：")]),t._v(" "),a("div",{staticClass:"input-embed-input-container"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.deliveryDate,expression:"deliveryDate"}],staticClass:"input-embed-input",attrs:{type:"date"},domProps:{value:t.deliveryDate},on:{input:function(e){e.target.composing||(t.deliveryDate=e.target.value)}}})])]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.receiver,expression:"receiver"}],staticClass:"form-input",attrs:{placeholder:"收件人："},domProps:{value:t.receiver},on:{input:function(e){e.target.composing||(t.receiver=e.target.value)}}}),t._v(" "),a("div",{staticClass:"form-input input-item-title"},[a("label",[t._v("收件日期：")]),t._v(" "),a("div",{staticClass:"input-embed-input-container"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.receivedDate,expression:"receivedDate"}],staticClass:"input-embed-input",attrs:{type:"date"},domProps:{value:t.receivedDate},on:{input:function(e){e.target.composing||(t.receivedDate=e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"form-input input-item-title"},[a("label",[t._v("已還：")]),t._v(" "),a("div",{staticClass:"input-embed-input-container"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.isReturn,expression:"isReturn"}],staticClass:"input-embed-input",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.isReturn)?t._i(t.isReturn,null)>-1:t.isReturn},on:{change:function(e){var a=t.isReturn,i=e.target,s=!!i.checked;if(Array.isArray(a)){var n=t._i(a,null);i.checked?n<0&&(t.isReturn=a.concat([null])):n>-1&&(t.isReturn=a.slice(0,n).concat(a.slice(n+1)))}else t.isReturn=s}}})])]),t._v(" "),a("button",{staticClass:"form-input submit-btn",on:{click:function(e){t.submit()}}},[t._v("新增")])],2)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title"},[e("h1",[this._v("新增表單")])])}]};var c=a("VU/8")(o,u,!1,function(t){a("OC+Y")},"data-v-6fa03d8c",null);e.default=c.exports}});
//# sourceMappingURL=9.ac3b5b1028df66707fa7.js.map