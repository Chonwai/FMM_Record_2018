webpackJsonp([4],{Xbu1:function(t,e){},d9cj:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("mvHQ"),a=s.n(i),r=s("DEN3"),n=s.n(r),l={data:function(){return{users:[],editingUser:[],search:"",getAllExternalUserApi:n.a.URL+n.a.getAllExternalUserApi,updateExternalUserApi:n.a.URL+n.a.updateExternalUserApi,deleteExternalUserApi:n.a.URL+n.a.deleteExternalUserApi}},computed:{filteredUser:function(){var t=this;return this.users.filter(function(e){return e.userName.match(t.search)||e.staffNumber.match(t.search)||e.userContact.match(t.search)})}},methods:{getAllUser:function(){var t=this;this.$http.get(this.getAllExternalUserApi).then(function(e){t.users=e.data})},editUser:function(t){$(".edit-panel-container").css("display","flex"),this.editingUser=[],this.editingUser=JSON.parse(a()(t))},closePanel:function(){$(".edit-panel-container").hide()},updateUser:function(){var t=this;this.$http.post(this.updateExternalUserApi,a()(this.editingUser)).then(function(e){1==e.data.message?(swal("修改成功！",{icon:"success"}),$(".edit-panel-container").hide(),t.users=[],t.getAllUser()):swal("修改失敗！",{icon:"error"})})},deleteUser:function(){var t=this;swal({title:"確定要刪除"+this.editingUser.userName+"嗎？",text:"進行刪除操作後，該資料便不能再復原",icon:"warning",buttons:!0,dangerMode:!0}).then(function(e){e?t.$http.post(t.deleteExternalUserApi,a()({userID:t.editingUser.userID})).then(function(e){1==e.data.message?(swal("該資料已成功刪除！",{icon:"success"}),$(".edit-panel-container").hide(),t.users=[],t.getAllUser()):swal("刪除失敗，請再試一次！",{icon:"error"})}):swal("該資料沒有被刪除！")})}},created:function(){this.getAllUser()}},c={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"edit-user-container"},[s("div",{staticClass:"edit-panel-container"},[s("div",{staticClass:"close-btn-container"},[s("div",{staticClass:"close-btn",on:{click:function(e){t.closePanel()}}},[t._v("×")])]),t._v(" "),s("div",{staticClass:"edit-panel"},[s("h1",[t._v("修改外部用戶資料")]),t._v(" "),s("div",{staticClass:"edit-panel-row"},[s("div",{staticClass:"row-item"},[s("p",{staticClass:"row-title"},[t._v("用戶名稱：")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.editingUser.userName,expression:"editingUser.userName"}],staticClass:"form-input",attrs:{placeholder:"用戶名稱",title:"用戶名稱"},domProps:{value:t.editingUser.userName},on:{input:function(e){e.target.composing||t.$set(t.editingUser,"userName",e.target.value)}}})])]),t._v(" "),s("div",{staticClass:"edit-panel-row"},[s("div",{staticClass:"row-item"},[s("p",{staticClass:"row-title"},[t._v("用戶編號：")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.editingUser.staffNumber,expression:"editingUser.staffNumber"}],staticClass:"form-input",attrs:{placeholder:"用戶編號"},domProps:{value:t.editingUser.staffNumber},on:{input:function(e){e.target.composing||t.$set(t.editingUser,"staffNumber",e.target.value)}}})])]),t._v(" "),s("div",{staticClass:"edit-panel-row"},[s("div",{staticClass:"row-item"},[s("p",{staticClass:"row-title"},[t._v("聯絡電話：")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.editingUser.userContact,expression:"editingUser.userContact"}],staticClass:"form-input",attrs:{placeholder:"聯絡電話",title:"聯絡電話"},domProps:{value:t.editingUser.userContact},on:{input:function(e){e.target.composing||t.$set(t.editingUser,"userContact",e.target.value)}}})])]),t._v(" "),s("div",{staticClass:"edit-panel-row"},[s("div",{staticClass:"row-item"},[s("p",{staticClass:"row-title"},[t._v("用戶部門：")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.editingUser.department,expression:"editingUser.department"}],staticClass:"form-input",attrs:{placeholder:"用戶部門",title:"用戶部門"},domProps:{value:t.editingUser.department},on:{input:function(e){e.target.composing||t.$set(t.editingUser,"department",e.target.value)}}})])]),t._v(" "),s("div",{staticClass:"edit-panel-row"},[s("div",{staticClass:"row-item"},[s("p",{staticClass:"row-title"},[t._v("用戶累計：")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.editingUser.sum,expression:"editingUser.sum"}],staticClass:"form-input",attrs:{placeholder:"用戶累計",title:"用戶累計"},domProps:{value:t.editingUser.sum},on:{input:function(e){e.target.composing||t.$set(t.editingUser,"sum",e.target.value)}}})])]),t._v(" "),s("div",{staticClass:"edit-panel-row"},[s("div",{staticClass:"row-item"},[s("div",{staticClass:"submit-btn update-btn group",on:{click:function(e){t.updateUser()}}},[s("p",[t._v("更新")])]),t._v(" "),s("div",{staticClass:"submit-btn update-btn group",on:{click:function(e){t.deleteUser()}}},[s("p",[t._v("刪除")])])])])])]),t._v(" "),t._m(0),t._v(" "),s("div",{staticClass:"title"},[s("div",{staticClass:"edit-panel-row search-input"},[s("div",{staticClass:"row-item"},[s("p",{staticClass:"row-title"},[t._v("搜尋用戶：")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"form-input",attrs:{placeholder:"請輸入搜尋條件"},domProps:{value:t.search},on:{input:function(e){e.target.composing||(t.search=e.target.value)}}})])])]),t._v(" "),s("div",{staticClass:"all-fat-card-container"},t._l(t.filteredUser,function(e){return s("div",{key:e.key,staticClass:"fat-card-item"},[s("div",{staticClass:"fat-card-info"},[s("div",{staticClass:"fat-card-text-container"},[s("h2",[t._v(t._s(e.userName))]),t._v(" "),s("p",[t._v("用戶編號："+t._s(e.staffNumber))]),t._v(" "),s("p",[t._v("聯絡電話："+t._s(e.userContact))]),t._v(" "),s("p",[t._v("用戶累計："+t._s(e.sum))])]),t._v(" "),t._m(1,!0)]),t._v(" "),s("button",{staticClass:"fat-card-edit-btn",on:{click:function(s){t.editUser(e)}}},[t._v("修改")])])}))])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title"},[e("h1",[this._v("外部用戶資料")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"fat-card-img-container"},[e("img",{attrs:{src:s("pLQe")}})])}]};var o=s("VU/8")(l,c,!1,function(t){s("Xbu1")},"data-v-5ad86ac2",null);e.default=o.exports},pLQe:function(t,e,s){t.exports=s.p+"static/img/healthy-boy.2b72b43.svg"}});
//# sourceMappingURL=4.d1c804210792e7048116.js.map